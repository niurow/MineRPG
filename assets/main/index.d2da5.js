System.register("chunks:///_virtual/Battle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CommonData.ts","./UtilsTool.ts","./BattleData.ts","./MineData.ts","./RebirthComfirm.ts"],(function(t){var e,a,o,l,i,r,n,s,h,m,u,p,D,d,c,f,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,o=t.initializerDefineProperty,l=t.assertThisInitialized,i=t.createClass,r=t.asyncToGenerator},function(t){n=t.cclegacy,s=t._decorator,h=t.Node,m=t.Label,u=t.Color,p=t.Component},function(t){D=t.CommonData},function(t){d=t.UtilsTool},function(t){c=t.BattleData},function(t){f=t.MineData},function(t){b=t.RebirthComfirm}],execute:function(){var v,g,M,y,R,I,H,k,N,C,F,w,z,x,B,P,T,E,L;n._RF.push({},"031a6lnZ0tD7bNo0Kbv6bwi","Battle",void 0);var _=s.ccclass,q=s.property;t("Battle",(v=_("Battle"),g=q(h),M=q(m),y=q(m),R=q(h),I=q(m),H=q(m),k=q(m),N=q(b),v((w=e((F=function(t){function e(){for(var e,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,o(e,"nodeRoleFlag",w,l(e)),o(e,"labelRoleName",z,l(e)),o(e,"labelRoleHp",x,l(e)),o(e,"nodeMonFlag",B,l(e)),o(e,"labelMonName",P,l(e)),o(e,"labelMonHp",T,l(e)),o(e,"labelDes",E,l(e)),o(e,"rebirthComfirm",L,l(e)),e.tileIndex=0,e.monsterData=null,e}a(e,t);var n=e.prototype;return n.battle=function(){var t=r((function*(t){if(this.tileIndex=t,-1!=this.monsterId){for(this.node.active=!0,this.monsterData=c.config.getMonsterData(this.monsterId,this.roleData.floorLevel.val),c.model.formMonData(this.monsterData),this.nodeRoleFlag.active=!1,this.nodeMonFlag.active=!1,this.labelDes.string="",this.labelRoleName.string=this.roleData.name.val,this.labelMonName.string=this.monsterName,this.updateRoleHp(),this.updateMonsterHp(),yield d.delay(1,this);this.roleData.hp.val>0;){if(this.atkMon(),yield d.delay(1,this),this.monsterData.hp<=0)return this.victory(),this.node.active=!1,this.tileData.monsterClear.val=!0,void f.model.checkClear();if(this.atkRole(),yield d.delay(1,this),this.roleData.hp.val<=0)if(this.roleData.rebirth.val>0)1==(yield this.rebirthComfirm.open())&&(this.roleData.rebirth.val--,this.roleData.hp.val+=500,this.updateRoleHp(),yield d.delay(1,this))}D.model.appendPromptMsg("你倒下了"),c.model.roleDeath(),this.node.active=!1}else this.node.active=!1}));return function(e){return t.apply(this,arguments)}}(),n.victory=function(){D.model.appendPromptMsg("战斗胜利！"),D.model.appendPromptMsg("金币+"+Math.round(this.monsterData.gold)),D.model.appendPromptMsg("经验值+"+Math.round(this.monsterData.exp)),D.model.appendPromptMsg("积分+"+Math.round(this.monsterData.score)),this.roleData.gold.val+=Math.round(this.monsterData.gold),this.roleData.exp.val+=Math.round(this.monsterData.exp),this.roleData.score.val+=Math.round(this.monsterData.score),this.roleData.totalScore.val+=Math.round(this.monsterData.score)},n.updateRoleHp=function(){this.labelRoleHp.string="血量："+this.roleData.hp.val},n.updateMonsterHp=function(){this.labelMonHp.string="血量："+this.monsterData.hp},n.atkRole=function(){this.labelDes.color=u.WHITE,this.labelDes.string="",this.nodeRoleFlag.active=!0,this.nodeMonFlag.active=!1;var t=this.monsterData.atk,e=this.monsterData.def;if(t-this.roleData.def.val<this.roleData.hp.val/20&&this.roleData.atk.val-e<this.roleData.hp.val/10&&(t+=this.roleData.def.val,this.roleData.hp.val/(t-this.roleData.def.val)>20&&(t+=this.roleData.hp.val/20)),0==d.randomInt(0,30))this.labelDes.string=this.roleData.name.val+" 躲开了攻击";else{0==d.randomInt(0,30)&&(this.labelDes.color=u.RED,this.labelDes.string="暴击!\n",t=Math.floor(1.5*t));var a=t-this.roleData.def.val,o=a>0?a+d.randomInt(0,5*a/100):1;o=Math.floor(o),this.labelDes.string+=this.roleData.name.val+" 受到了",this.labelDes.string+=o+" 点伤害",this.roleData.hp.val-=o,this.roleData.hp.val=Math.max(this.roleData.hp.val,0),this.updateRoleHp()}},n.atkMon=function(){this.labelDes.color=u.WHITE,this.labelDes.string="",this.nodeRoleFlag.active=!1,this.nodeMonFlag.active=!0;var t=this.roleData.atk.val+c.model.equipAtk(),e=this.roleData.def.val+c.model.equipDef();if(t-this.monsterData.def<this.monsterData.hp/20&&this.monsterData.atk-e<this.monsterData.hp/10&&(t+=this.monsterData.def,this.monsterData.hp/(t-this.monsterData.def)>20&&(t+=this.monsterData.hp/20)),0==d.randomInt(0,30))this.labelDes.string=this.monsterName+" 躲开了攻击";else{0==d.randomInt(0,30)&&(this.labelDes.color=u.RED,this.labelDes.string="暴击!\n",t=Math.floor(1.5*t));var a=t-this.monsterData.def,o=a>0?a+d.randomInt(0,5*a/100):1;o=Math.floor(o),this.labelDes.string+=this.monsterName+" 受到了",this.labelDes.string+=o+" 点伤害",this.monsterData.hp-=o,this.monsterData.hp=Math.max(this.monsterData.hp,0),this.updateMonsterHp()}},i(e,[{key:"tileData",get:function(){return f.model.grids[this.tileIndex]}},{key:"monsterId",get:function(){return this.tileData.monsterId.val}},{key:"monsterName",get:function(){return c.config.MonsterName[this.monsterId]}},{key:"roleData",get:function(){return c.model.roleData}}]),e}(p)).prototype,"nodeRoleFlag",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(F.prototype,"labelRoleName",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(F.prototype,"labelRoleHp",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(F.prototype,"nodeMonFlag",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(F.prototype,"labelMonName",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(F.prototype,"labelMonHp",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(F.prototype,"labelDes",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(F.prototype,"rebirthComfirm",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=F))||C));n._RF.pop()}}}));

System.register("chunks:///_virtual/BattleData.ts",["cc","./GEvent.ts","./ObjProxy.ts","./StorableValue.ts","./UtilsTool.ts","./MineData.ts"],(function(e){var t,r,n,o,a,s,l;return{setters:[function(e){t=e.cclegacy},function(e){r=e.GEvent},function(e){n=e.ObjProxy},function(e){o=e.StorableString,a=e.StorableNumber},function(e){s=e.UtilsTool},function(e){l=e.MineData}],execute:function(){var i;e("BattleData",void 0),t._RF.push({},"9c09f2coo1N26aiCXooeFBz","BattleData",void 0),function(e){var t,i;(i=t||(t=e.Events||(e.Events={}))).EVT_ENCOUNTER_MONSTER=new r.EventIns("EVT_ENCOUNTER_MONSTER"),i.EVT_PLAYER_ATTR_UPDATE=new n((function(e){return new r.EventIns("EVT_PLAYER_ATTR_UPDATE_"+e)})).proxy,i.EVT_BATTLE_START=new r.EventIns("EVT_BATTLE_START"),i.EVT_BATTLE_ROLE_DEATH=new r.EventIns("EVT_BATTLE_ROLE_DEATH");var c=function(){this.name=new o((function(){return"PLAYER_ATTR_NAME"}),"",(function(){return t.EVT_PLAYER_ATTR_UPDATE.name.emit()})),this.level=new a((function(){return"PLAYER_ATTR_LEVEL"}),1,(function(){return t.EVT_PLAYER_ATTR_UPDATE.level.emit()})),this.exp=new a((function(){return"PLAYER_ATTR_EXP"}),0,(function(){return t.EVT_PLAYER_ATTR_UPDATE.exp.emit()})),this.gold=new a((function(){return"PLAYER_ATTR_GOLD"}),0,(function(){return t.EVT_PLAYER_ATTR_UPDATE.gold.emit()})),this.hp=new a((function(){return"PLAYER_ATTR_HP"}),10,(function(){return t.EVT_PLAYER_ATTR_UPDATE.hp.emit()})),this.atk=new a((function(){return"PLAYER_ATTR_ATK"}),30,(function(){return t.EVT_PLAYER_ATTR_UPDATE.atk.emit()})),this.def=new a((function(){return"PLAYER_ATTR_DEF"}),10,(function(){return t.EVT_PLAYER_ATTR_UPDATE.def.emit()})),this.sword=new a((function(){return"PLAYER_ATTR_SWORLD"}),0,(function(){return t.EVT_PLAYER_ATTR_UPDATE.sword.emit()})),this.shield=new a((function(){return"PLAYER_ATTR_SHIELD"}),0,(function(){return t.EVT_PLAYER_ATTR_UPDATE.shield.emit()})),this.armor=new a((function(){return"PLAYER_ATTR_ARMOR"}),0,(function(){return t.EVT_PLAYER_ATTR_UPDATE.armor.emit()})),this.rebirth=new a((function(){return"PLAYER_ATTR_REBIRTH"}),0,(function(){return t.EVT_PLAYER_ATTR_UPDATE.rebirth.emit()})),this.key=new a((function(){return"PLAYER_ATTR_KEY"}),0,(function(){return t.EVT_PLAYER_ATTR_UPDATE.key.emit()})),this.floorLevel=new a((function(){return"PLAYER_ATTR_FLOOR_LEVEL"}),0,(function(){return t.EVT_PLAYER_ATTR_UPDATE.floorLevel.emit()})),this.score=new a((function(){return"PLAYER_ATTR_FLOOR_SCORE"}),0,(function(){return t.EVT_PLAYER_ATTR_UPDATE.score.emit()})),this.totalScore=new a((function(){return"PLAYER_ATTR_FLOOR_TOTAL_SCORE"}),0,(function(){return t.EVT_PLAYER_ATTR_UPDATE.totalScore.emit()}))};e.RoleData=c;e.MonsterData=function(){this.hp=void 0,this.atk=void 0,this.def=void 0,this.gold=void 0,this.exp=void 0,this.score=void 0};var d=function(){function e(){this.roleData=new c}var t=e.prototype;return t.equipAtk=function(){var e=0;return this.roleData.sword.val>0&&(e+=30),this.roleData.armor.val>0&&(e+=20),this.roleData.sword.val=Math.min(this.roleData.sword.val,9999),this.roleData.armor.val=Math.min(this.roleData.armor.val,9999),e+20*this.roleData.sword.val+10*this.roleData.armor.val},t.equipDef=function(){var e=0;return this.roleData.armor.val>0&&(e+=25),this.roleData.shield.val>0&&(e+=20),this.roleData.shield.val=Math.min(this.roleData.shield.val,9999),e+15*this.roleData.shield.val+20*this.roleData.armor.val},t.roleDeath=function(){this.roleData.hp.val=10,this.roleData.floorLevel.val=1,this.roleData.score.val=0,this.roleData.sword.val=0,this.roleData.shield.val=0,this.roleData.armor.val=0,this.roleData.key.val=0,l.model.genGrid()},t.formRoleData=function(){this.roleData.hp.val=Math.floor(this.roleData.hp.val),this.roleData.def.val=Math.floor(this.roleData.def.val),this.roleData.gold.val=Math.floor(this.roleData.gold.val),this.roleData.exp.val=Math.floor(this.roleData.exp.val),this.roleData.score.val=Math.floor(this.roleData.score.val),this.roleData.totalScore.val=Math.floor(this.roleData.totalScore.val)},t.formMonData=function(e){e.hp=Math.floor(e.hp),e.atk=Math.floor(e.atk),e.def=Math.floor(e.def),e.exp=Math.floor(e.exp),e.gold=Math.floor(e.gold),e.score=Math.floor(e.score)},e}(),u=function(){function e(){this.MonsterName=["史莱姆","蝙蝠","骷髅","尸鬼","食人魔","大史莱姆","巨型史莱姆","大蝙蝠","骷髅剑士","尸鬼大君","尸鬼霸主","石魔","魔卫兵","魔剑士","魔王分身","红蝙蝠","骑士","黄金骑士","史莱姆王","魔法师","高阶魔法师","大魔法师","魔法师首领","黑石魔","石巨人","钻石骑士","金钢骑士","魔王","冥灵魔王","拉来耶之主","小恶魔","恶魔战士","精英恶魔","幻影"]}return e.prototype.getMonsterData=function(e,t){var r=t/5;r>1e4&&(r=1e4);var n=this.MonsterName[e];if(null==n)return null;switch(n){case"尸鬼":case"幻影":return{hp:100+6*r,atk:18+4*r,def:12+r,gold:s.randomInt(18,65),exp:18+r,score:100};case"石魔":return{hp:1200+80*r,atk:120+10*r,def:200+20*r,gold:s.randomInt(300,800),exp:450+20*r,score:1500};case"蝙蝠":return{hp:40+5*r,atk:15+3*r,def:6+r,gold:s.randomInt(10,50),exp:6+r,score:50};case"骑士":return{hp:500+30*r,atk:230+10*r,def:180+20*r,gold:s.randomInt(300,800),exp:400+20*r,score:1e3};case"骷髅":return{hp:80+5*r,atk:20+4*r,def:10+2*r,gold:s.randomInt(15,65),exp:12+r,score:80};case"魔王":return{hp:1e4+80*r,atk:2e3+90*r,def:1500+50*r,gold:s.randomInt(2e3,3e3),exp:15e3+80*r,score:1e4};case"食人魔":return{hp:230+20*r,atk:80+6*r,def:50+3*r,gold:s.randomInt(50,200),exp:100+5*r,score:500};case"魔剑士":return{hp:650+50*r,atk:300+50*r,def:120+20*r,gold:s.randomInt(300,800),exp:600+30*r,score:1800};case"魔卫兵":return{hp:800+80*r,atk:180+20*r,def:120+10*r,gold:s.randomInt(300,800),exp:500+30*r,score:1800};case"石巨人":return{hp:15e3+150*r,atk:300+20*r,def:500+100*r,gold:s.randomInt(2e3,3e3),exp:1e4+60*r,score:8e3};case"小恶魔":return{hp:8e3+50*r,atk:1200+50*r,def:800+30*r,gold:s.randomInt(1e3,2500),exp:1e4+50*r,score:7e3};case"魔法师":return{hp:150+5*r,atk:100+20*r,def:10+5*r,gold:s.randomInt(20,80),exp:60+2*r,score:150};case"黑石魔":return{hp:6e3+120*r,atk:300+10*r,def:500+80*r,gold:s.randomInt(1e3,2e3),exp:5e3+40*r,score:4500};case"史莱姆":return{hp:50+5*r,atk:10+2*r,def:8+r,gold:s.randomInt(10,50),exp:5+r,score:50};case"大蝙蝠":return{hp:150+15*r,atk:50+6*r,def:20+2*r,gold:s.randomInt(30,150),exp:60+3*r,score:300};case"红蝙蝠":return{hp:500+30*r,atk:200+15*r,def:100+10*r,gold:s.randomInt(300,800),exp:300+15*r,score:800};case"魔王分身":return{hp:5e3+100*r,atk:500+30*r,def:300+20*r,gold:s.randomInt(800,2e3),exp:5e3+50*r,score:5e3};case"骷髅剑士":return{hp:180+15*r,atk:80+6*r,def:50+3*r,gold:s.randomInt(50,200),exp:80+5*r,score:400};case"尸鬼大君":return{hp:350+30*r,atk:120+10*r,def:80+5*r,gold:s.randomInt(120,500),exp:150+8*r,score:800};case"史莱姆王":return{hp:3500+80*r,atk:300+20*r,def:400+50*r,gold:s.randomInt(1e3,2e3),exp:3e3+50*r,score:3500};case"精英恶魔":return{hp:12e3+50*r,atk:1800+50*r,def:1e3+30*r,gold:s.randomInt(1e3,2500),exp:13500+50*r,score:9500};case"恶魔战士":return{hp:1e4+50*r,atk:1500+50*r,def:800+30*r,gold:s.randomInt(1e3,2500),exp:12e3+50*r,score:8500};case"大魔法师":return{hp:800+20*r,atk:600+100*r,def:100+20*r,gold:s.randomInt(800,1500),exp:1500+30*r,score:1500};case"大史莱姆":return{hp:200+15*r,atk:30+5*r,def:40+2*r,gold:s.randomInt(30,150),exp:55+3*r,score:300};case"尸鬼霸主":return{hp:500+50*r,atk:200+20*r,def:120+10*r,gold:s.randomInt(300,800),exp:300+15*r,score:1200};case"黄金骑士":return{hp:1500+50*r,atk:350+20*r,def:220+20*r,gold:s.randomInt(300,800),exp:800+20*r,score:2e3};case"金钢骑士":return{hp:3e3+50*r,atk:350+30*r,def:350+30*r,gold:s.randomInt(300,800),exp:2e3+20*r,score:3e3};case"钻石骑士":return{hp:5e3+80*r,atk:300+20*r,def:500+50*r,gold:s.randomInt(800,1200),exp:3500+40*r,score:4500};case"冥灵魔王":return{hp:3e4+200*r,atk:5e3+200*r,def:3500+150*r,gold:s.randomInt(5e3,1e4),exp:5e4+100*r,score:1e5};case"巨型史莱姆":return{hp:1500+50*r,atk:200+20*r,def:300+50*r,gold:s.randomInt(500,1200),exp:800+20*r,score:2e3};case"拉来耶之主":return{hp:5e5+500*r,atk:1e4+500*r,def:5e3+300*r,gold:s.randomInt(5e4,1e5),exp:5e5+300*r,score:1e6};case"高阶魔法师":return{hp:500+15*r,atk:300+50*r,def:100+10*r,gold:s.randomInt(200,800),exp:300+10*r,score:600};case"魔法师首领":return{hp:1500+20*r,atk:2e3+150*r,def:500+20*r,gold:s.randomInt(1e3,2e3),exp:5e3+60*r,score:4500}}return null},e}();e.model=new d,e.config=new u}(i||(i=e("BattleData",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/CommonData.ts",["cc","./GEvent.ts"],(function(t){var n,o;return{setters:[function(t){n=t.cclegacy},function(t){o=t.GEvent}],execute:function(){var e;t("CommonData",void 0),n._RF.push({},"218aaCQlcdJ1rJFaO+bSfRh","CommonData",void 0),function(t){var n;(n||(n=t.Events||(t.Events={}))).EVT_PROMPT_MSG=new o.EventIns("EVT_PROMPT_MSG");var e=function(){function t(){this.promptMsg=[]}var o=t.prototype;return o.appendPromptMsg=function(t){this.promptMsg.push(t),n.EVT_PROMPT_MSG.emit()},o.getPromptMsg=function(){for(var t="";this.promptMsg.length>0;){t+=this.promptMsg.shift(),this.promptMsg.length>0&&(t+="\n")}return t},t}();t.model=new e}(e||(e=t("CommonData",{}))),n._RF.pop()}}}));

System.register("chunks:///_virtual/GEvent.ts",["cc"],(function(n){var t,e,i,E,o,a;return{setters:[function(n){t=n.cclegacy,e=n.EventTarget,i=n.Game,E=n.game,o=n.Director,a=n.director}],execute:function(){n("GEvent",void 0),t._RF.push({},"abc0daa1ndCOIDghd7QWZGY","GEvent",void 0);var v,r,s,c,u,_,T,f=new e;r=v||(v=n("GEvent",{})),s=function(){function n(n,t){void 0===t&&(t=f),this.Arg=void 0,this.name=n,this.eventTarget=t}var t=n.prototype;return t.emit=function(n){var t;null==(t=this.eventTarget)||t.emit(this.name,n)},t.on=function(n,t){var e;null==(e=this.eventTarget)||e.on(this.name,(function(t){n(t)}),t)},t.once=function(n,t){var e;null==(e=this.eventTarget)||e.once(this.name,n,t)},t.off=function(n,t){var e;null==(e=this.eventTarget)||e.off(this.name,n,t)},t.targetOff=function(n){var t;null==(t=this.eventTarget)||t.targetOff(n)},n}(),r.EventIns=s,r.onEvent=function(n,t){return void 0===t&&(t=!1),function(e,i,E){var o=e.onLoad;e.onLoad=function(){null==o||o.apply(this),1==t&&E.value.call(this),n.call(this).on(E.value.bind(this),this)}}},c=v||(v=n("GEvent",{})),(_=u||(u=c.Cocos||(c.Cocos={}))).EVT_CC_ENGINE_INITED=new v.EventIns(i.EVENT_ENGINE_INITED,E),_.EVT_CC_GAME_INITED=new v.EventIns(i.EVENT_GAME_INITED,E),_.EVT_CC_AFTER_SCENE_LAUNCH=new v.EventIns(o.EVENT_AFTER_SCENE_LAUNCH,a),(T||(T=c.Game||(c.Game={}))).EVT_GAME_INIT=new v.EventIns("EVT_GAME_INIT"),t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./CommonData.ts","./GEvent.ts","./ObjPool.ts","./ObjProxy.ts","./PromptBox.ts","./SetFrameRate.ts","./StorableValue.ts","./Battle.ts","./BattleData.ts","./MineData.ts","./MineGame.ts","./MineRes.ts","./MineTile.ts","./MonsterInfo.ts","./RebirthComfirm.ts","./Resequence.ts","./UtilsTool.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MineData.ts",["cc","./CommonData.ts","./GEvent.ts","./ObjProxy.ts","./StorableValue.ts","./UtilsTool.ts","./BattleData.ts"],(function(e){var t,a,o,l,r,n,i,s,v;return{setters:[function(e){t=e.cclegacy},function(e){a=e.CommonData},function(e){o=e.GEvent},function(e){l=e.ObjProxy},function(e){r=e.StorableBoolean,n=e.StorableNumber,i=e.StorableEnum},function(e){s=e.UtilsTool},function(e){v=e.BattleData}],execute:function(){var d;e("MineData",void 0),t._RF.push({},"e58fcR0KBlCiKQMkB/HrY8G","MineData",void 0),function(e){var t=function(e){return e[e.None=0]="None",e[e.Monster=1]="Monster",e[e.Gold=2]="Gold",e[e.RedGem=3]="RedGem",e[e.BlueGem=4]="BlueGem",e[e.RedBot=5]="RedBot",e[e.BlueBot=6]="BlueBot",e[e.Sword=7]="Sword",e[e.Shield=8]="Shield",e[e.Armor=9]="Armor",e[e.Shop=10]="Shop",e[e.Gate=11]="Gate",e[e.Rebirth=12]="Rebirth",e[e.Diamond=13]="Diamond",e[e.PurpleGem=14]="PurpleGem",e[e.DarkGem=15]="DarkGem",e[e.Key=16]="Key",e[e.Cross=17]="Cross",e[e.MagicPotion=18]="MagicPotion",e[e.Chest=19]="Chest",e}({});e.ETileType=t;var m=function(e){var a=this;void 0===e&&(e=-1),this.pos=void 0,this.monsterClear=new r((function(){return"MINE_TILE_"+a.index+"_MON_CLEAR"}),!1,(function(){return p.EVT_TILE_ATTR_UPDATE[a.index].monsterClear.emit()})),this.promtCount=new n((function(){return"MINE_TILE_"+a.index+"_PROMPT_COUNT"}),0),this.monsterId=new n((function(){return"MINE_TILE_"+a.index+"_MONSTER_ID"}),-1),this.type=new i((function(){return"MINE_TILE_"+a.index+"_TYPE"}),t.None,(function(){return p.EVT_TILE_ATTR_UPDATE[a.index].type.emit()})),this.itemCount=new n((function(){return"MINE_TILE_"+a.index+"_ITEM_COUNT"}),0,(function(){return p.EVT_TILE_ATTR_UPDATE[a.index].itemCount.emit()})),this.clear=new r((function(){return"MINE_TILE_"+a.index+"_CLEAR"}),!1,(function(){p.EVT_TILE_ATTR_UPDATE[a.index].clear.emit(),a.flag.val=!1,1==a.clear.val&&(-1!=a.monsterId.val&&0==f.isAllClear.val?v.Events.EVT_ENCOUNTER_MONSTER.emit(a.index):f.checkClear())})),this.flag=new r((function(){return"MINE_TILE_"+a.index+"_FLAG"}),!1,(function(){p.EVT_TILE_ATTR_UPDATE[a.index].flag.emit(),1==a.flag.val&&f.checkClear(),f.checkAllPromptWrong()})),this.flagState=new r((function(){return"MINE_TILE_"+a.index+"_FLAG_STATE"}),!0,(function(){return p.EVT_TILE_ATTR_UPDATE[a.index].flagState.emit()})),this.index=e,this.pos=f.indexToPos(e)};e.Tile=m;var p,c,u=[[-1,1],[0,1],[1,1],[-1,0],[1,0],[-1,-1],[0,-1],[1,-1]];(c=p||(p=e.Events||(e.Events={}))).EVT_TILE_ATTR_UPDATE=new l((function(e){return new l((function(t){return new o.EventIns("EVT_TILE_ATTR_UPDATE_"+e+"_"+t)})).proxy})).proxy,c.EVT_TILE_TEST=new l((function(e){return new o.EventIns("EVT_TILE_TEST_"+e)})).proxy,c.EVT_OPEN_SHOP=new o.EventIns("EVT_OPEN_SHOP"),c.EVT_ROUND_START=new o.EventIns("EVT_GAME_START"),c.EVT_ALL_CLEAR=new o.EventIns("EVT_ALL_CLEAR");var h=function(){function e(){var e=this;this.grids=new l((function(e){return new m(e)})).proxy,this.rows=10,this.cols=15,this.total=this.rows*this.cols,this.isAllClear=new r((function(){return"MINE_ALL_CLEAR"}),!1,(function(){return p.EVT_ALL_CLEAR.emit(e.isAllClear.val)}))}var o=e.prototype;return o.posToIndex=function(e,t){return e+t*this.rows},o.indexToPos=function(e){return{x:e%this.rows,y:Math.floor(e/this.rows)}},o.genGrid=function(){v.model.formRoleData(),this.isAllClear.val=!1;for(var e=0;e<this.total;e++){var a=this.grids[e];a.type.val=t.None,a.monsterId.val=-1,a.promtCount.val=0,a.itemCount.val=0,a.clear.val=!1,a.flag.val=!1,a.monsterClear.val=!1,a.flagState.val=!0}for(var o=s.randomInt(3,30);o>1;o--)for(var l=0;l<this.rows;l++)if(s.randomInt(0,o/3+1)>=s.randomInt(0,o+1))for(var r=0;r<this.cols;r++){var n=this.getTile(l,r);if(-1==n.monsterId.val&&1==s.randomInt(0,o)){n.type.val=t.Monster,n.monsterId.val=s.randomInt(0,v.config.MonsterName.length);break}}this.genPromptCount(),this.genItem();for(var i=[],d=0;d<this.total;d++)-1==this.grids[d].monsterId.val&&i.push(this.grids[d]);i.sort((function(){return Math.random()-.5}));for(var m=0;m<15;m++)if(i.length>0){var c=i.pop();c.clear.val=!0,this.openAllBlank(c.pos.x,c.pos.y)}p.EVT_ROUND_START.emit()},o.genItem=function(){for(var e=s.randomInt(30,99),a=!1,o=!1;e>0;e--){var l=s.randomInt(0,this.total),r=this.grids[l];if(-1==r.monsterId.val&&(0==r.promtCount.val&&0==s.randomInt(0,2))){r.type.val=t.Chest;var n=s.randomInt(0,15e3);if(n<3e3)r.type.val=t.Gold,r.itemCount.val=s.randomInt(15,500);else if(n<4e3)r.type.val=0!=s.randomInt(0,2)?t.BlueGem:t.RedGem;else if(n<5500)r.type.val=t.RedBot;else if(n<6500)r.type.val=t.BlueBot;else if(n<6650)r.type.val=t.Diamond;else if(n<7500)switch(s.randomInt(0,4)){case 0:r.type.val=t.Sword;continue;case 1:r.type.val=t.Shield;continue;default:r.type.val=t.Armor;continue}else n<7600&&0==o?(r.type.val=t.Gate,o=!0):n<8e3?r.type.val=t.Chest:n<8800?r.type.val=t.Key:n<9800&&0==a?(r.type.val=t.Shop,a=!0):n<1e4&&(r.type.val=t.Rebirth)}}},o.start=function(){if(v.model.roleData.hp.val<=0)v.model.roleDeath();else{for(var e=0,t=0;t<this.total;t++)-1!=this.grids[t].monsterId.val&&e++;e<=0?this.genGrid():p.EVT_ROUND_START.emit()}},o.getAroundTiles=function(e,t){for(var a=[],o=0,l=u.length;o<l;o++){var r=u[o],n=r[0],i=r[1],s=this.getTile(e+n,t+i);null!=s&&a.push(s)}return a},o.genPromptCount=function(){for(var e=0;e<this.total;e++){var t=this.grids[e];if(-1!=t.monsterId.val)for(var a=this.getAroundTiles(t.pos.x,t.pos.y),o=0,l=a.length;o<l;o++)a[o].promtCount.val++}},o.getTile=function(e,t){return e<0||e>=this.rows||t<0||t>=this.cols?null:this.grids[this.posToIndex(e,t)]},o.openAllBlank=function(e,t){var a=this.getTile(e,t);if(0==a.promtCount.val&&-1==a.monsterId.val)for(var o=this.getAroundTiles(e,t),l=0,r=o.length;l<r;l++){var n=o[l];1!=n.clear.val&&(n.clear.val=!0,this.openAllBlank(n.pos.x,n.pos.y))}},o.testAround=function(e,t){var a=this.getTile(e,t);if(0!=a.promtCount.val&&-1==a.monsterId.val){for(var o=this.getAroundTiles(e,t),l=[],r=0,n=0,i=0,s=o.length;i<s;i++){var v=o[i];0==v.clear.val&&l.push(v),1==v.flag.val&&r++,1==v.clear.val&&-1!=v.monsterId.val&&n++,0==v.clear.val&&0==v.flag.val&&p.EVT_TILE_TEST[o[i].index].emit()}if(l.length==a.promtCount.val-n)l.forEach((function(e){return e.flag.val=!0}));else if(a.promtCount.val==r+n)for(var d=0,m=o.length;d<m;d++){var c=o[d];1==c.flag.val&&-1!=c.monsterId.val||(0==c.clear.val&&(c.clear.val=!0),this.openAllBlank(c.pos.x,c.pos.y))}a.flagState.val=!(a.promtCount.val<r+n)}},o.checkAllPromptWrong=function(){for(var e=0;e<this.total;e++){var t=this.grids[e];this.checkPromptWrong(t.pos.x,t.pos.y)}},o.checkPromptWrong=function(e,t){var a=this.getTile(e,t);if(0!=a.promtCount.val&&-1==a.monsterId.val){for(var o=this.getAroundTiles(e,t),l=0,r=0,n=0,i=o.length;n<i;n++){var s=o[n];s.clear.val,1==s.flag.val&&l++,1==s.clear.val&&-1!=s.monsterId.val&&r++}a.flagState.val=!(a.promtCount.val<l+r)}},o.checkClear=function(){if(0==this.isAllClear.val&&this.checkPass()){this.isAllClear.val=!0;for(var e=0;e<this.total;e++)this.grids[e].clear.val=!0}},o.checkPass=function(){for(var e=0;e<this.total;e++){var t=this.grids[e];if(-1!=t.monsterId.val&&0==t.flag.val&&0==t.clear.val)return!1;if(-1==t.monsterId.val&&0==t.clear.val)return!1}return!0},o.dig=function(e,t){var a=this.getTile(e,t);1!=a.flag.val&&(0==a.clear.val?(a.clear.val=!0,d.model.openAllBlank(e,t)):this.processType(a))},o.testTile=function(e,t){var a=this.getTile(e,t);1!=a.flag.val&&0!=a.clear.val&&d.model.testAround(e,t)},o.processType=function(e){if(e.type.val!=t.None&&e.type.val!=t.Monster){var o=e.type.val;switch(e.type.val=t.None,o){case t.Gold:v.model.roleData.gold.val+=e.itemCount.val,a.model.appendPromptMsg("获得金币"+e.itemCount.val);break;case t.RedGem:v.model.roleData.atk.val+=10,a.model.appendPromptMsg("获得红宝石，攻击力+10");break;case t.BlueGem:v.model.roleData.def.val+=5,a.model.appendPromptMsg("获得红宝石，防御力+5");break;case t.RedBot:v.model.roleData.hp.val+=100,a.model.appendPromptMsg("获得红宝石，血量+100");break;case t.BlueBot:v.model.roleData.hp.val+=300,a.model.appendPromptMsg("获得红宝石，血量+300");break;case t.Sword:v.model.roleData.sword.val++,a.model.appendPromptMsg("获得装备-剑");break;case t.Shield:v.model.roleData.shield.val++,a.model.appendPromptMsg("获得装备-盾");break;case t.Armor:v.model.roleData.armor.val++,a.model.appendPromptMsg("获得装备-铠甲");break;case t.Shop:e.type.val=t.Shop,p.EVT_OPEN_SHOP.emit();break;case t.Gate:this.next();break;case t.Rebirth:v.model.roleData.rebirth.val++,a.model.appendPromptMsg("获得复活币");break;case t.Diamond:v.model.roleData.gold.val+=5e3,a.model.appendPromptMsg("获得钻石，金币+5000");break;case t.PurpleGem:v.model.roleData.atk.val+=30,v.model.roleData.def.val+=30,a.model.appendPromptMsg("获得紫宝石，攻击+30，防御力+30");break;case t.DarkGem:v.model.roleData.atk.val+=100,v.model.roleData.def.val+=100,a.model.appendPromptMsg("获得暗宝石，攻击+100，防御力+100");break;case t.Key:v.model.roleData.key.val++,a.model.appendPromptMsg("获得宝箱钥匙");break;case t.Cross:v.model.roleData.exp.val*=2,a.model.appendPromptMsg("获得十字架，经验翻倍");break;case t.MagicPotion:v.model.roleData.hp.val*=2,a.model.appendPromptMsg("获得魔药剂，血量翻倍");break;case t.Chest:if(v.model.roleData.key.val>0){v.model.roleData.key.val--,this.openChest(e);break}a.model.appendPromptMsg("没有钥匙，无法打开"),e.type.val=t.Chest}}},o.next=function(){a.model.appendPromptMsg("过关! 经验值+1000 得分+3000"),v.model.roleData.floorLevel.val++,v.model.roleData.exp.val+=1e3,v.model.roleData.score.val+=3e3,v.model.roleData.totalScore.val+=3e3,this.genGrid()},o.openChest=function(e){var a=s.randomInt(0,100);if(a<30)e.type.val=t.Gold,e.itemCount.val=s.randomInt(200,500);else if(a<40)e.type.val=t.BlueBot;else if(a<50)switch(s.randomInt(0,3)){case 0:e.type.val=t.Sword;break;case 1:e.type.val=t.Shield;break;case 2:e.type.val=t.Armor}else if(a<70)switch(s.randomInt(0,2)){case 0:e.type.val=t.RedGem;break;case 1:e.type.val=t.BlueGem}else if(a<80)switch(s.randomInt(0,2)){case 0:e.type.val=t.MagicPotion;break;case 1:e.type.val=t.Cross}else if(a<90)e.type.val=t.Diamond;else switch(s.randomInt(0,3)){case 0:e.type.val=t.PurpleGem;break;case 1:e.type.val=t.DarkGem;break;case 2:e.type.val=t.Rebirth}},e}(),f=e.model=new h}(d||(d=e("MineData",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/MineGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CommonData.ts","./GEvent.ts","./ObjPool.ts","./PromptBox.ts","./UtilsTool.ts","./Battle.ts","./BattleData.ts","./MineData.ts","./MineTile.ts","./MonsterInfo.ts"],(function(e){var t,o,n,r,l,i,a,p,u,c,s,y,b,P,f,T,d,m,v,E,h,g,D,A,U,O,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){l=e.cclegacy,i=e._decorator,a=e.Node,p=e.Camera,u=e.Label,c=e.Button,s=e.instantiate,y=e.sys,b=e.Input,P=e.EventMouse,f=e.Color,T=e.Animation,d=e.Component},function(e){m=e.CommonData},function(e){v=e.GEvent},function(e){E=e.ObjPool},function(e){h=e.PromptBox},function(e){g=e.UtilsTool},function(e){D=e.Battle},function(e){A=e.BattleData},function(e){U=e.MineData},function(e){O=e.MineTile},function(e){_=e.MonsterInfo}],execute:function(){var w,L,M,R,S,N,G,x,z,j,C,B,V,I,H,Y,k,F,W,Z,J,q,K,Q,X,$,ee,te,oe,ne,re,le,ie,ae,pe,ue,ce,se,ye,be,Pe,fe,Te,de,me,ve,Ee,he,ge,De,Ae,Ue,Oe,_e,we,Le,Me,Re,Se,Ne,Ge;l._RF.push({},"7830eEsZGtIvZBTTZcJH0gG","MineGame",void 0);var xe=i.ccclass,ze=i.property;e("MineGame",(w=xe("MineGame"),L=ze(a),M=ze(O),R=ze(a),S=ze(p),N=ze(h),G=ze(u),x=ze(u),z=ze(u),j=ze(u),C=ze(u),B=ze(u),V=ze(u),I=ze(u),H=ze(u),Y=ze(u),k=ze(u),F=ze(u),W=ze(D),Z=ze(c),J=ze(_),q=v.onEvent((function(){return U.Events.EVT_ROUND_START})),K=v.onEvent((function(){return A.Events.EVT_PLAYER_ATTR_UPDATE.floorLevel}),!0),Q=v.onEvent((function(){return A.Events.EVT_PLAYER_ATTR_UPDATE.score}),!0),X=v.onEvent((function(){return A.Events.EVT_PLAYER_ATTR_UPDATE.name}),!0),$=v.onEvent((function(){return A.Events.EVT_PLAYER_ATTR_UPDATE.level}),!0),ee=v.onEvent((function(){return A.Events.EVT_PLAYER_ATTR_UPDATE.exp}),!0),te=v.onEvent((function(){return A.Events.EVT_PLAYER_ATTR_UPDATE.gold}),!0),oe=v.onEvent((function(){return A.Events.EVT_PLAYER_ATTR_UPDATE.hp}),!0),ne=v.onEvent((function(){return A.Events.EVT_PLAYER_ATTR_UPDATE.atk}),!0),re=v.onEvent((function(){return A.Events.EVT_PLAYER_ATTR_UPDATE.def}),!0),le=v.onEvent((function(){return A.Events.EVT_PLAYER_ATTR_UPDATE.sword}),!0),ie=v.onEvent((function(){return A.Events.EVT_PLAYER_ATTR_UPDATE.shield}),!0),ae=v.onEvent((function(){return A.Events.EVT_PLAYER_ATTR_UPDATE.armor}),!0),pe=v.onEvent((function(){return m.Events.EVT_PROMPT_MSG})),ue=v.onEvent((function(){return A.Events.EVT_ENCOUNTER_MONSTER})),ce=v.onEvent((function(){return U.Events.EVT_ALL_CLEAR}),!0),w((be=t((ye=function(e){function t(){for(var t,o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return t=e.call.apply(e,[this].concat(l))||this,n(t,"rows",be,r(t)),n(t,"cols",Pe,r(t)),n(t,"nodeGrids",fe,r(t)),n(t,"prefabTile",Te,r(t)),n(t,"touchLayer",de,r(t)),n(t,"camera",me,r(t)),n(t,"promptBox",ve,r(t)),n(t,"labelFloorLevel",Ee,r(t)),n(t,"labelScore",he,r(t)),n(t,"labelName",ge,r(t)),n(t,"labelLevel",De,r(t)),n(t,"labelExp",Ae,r(t)),n(t,"labelGold",Ue,r(t)),n(t,"labelHp",Oe,r(t)),n(t,"labelAtk",_e,r(t)),n(t,"labelDef",we,r(t)),n(t,"labelSword",Le,r(t)),n(t,"labelShield",Me,r(t)),n(t,"labelArmor",Re,r(t)),n(t,"battle",Se,r(t)),n(t,"btnNext",Ne,r(t)),n(t,"monInfo",Ge,r(t)),t.itemPool=new E((function(){return s(t.prefabTile.node).getComponent(O)}),(function(e){e.node.active=!1,e.node.setParent(t.node)})),t.mouseLeftDown=!1,t.currentMovePointTile=null,t.currentPointTile=null,t.longPressDuration=0,t.prompt=function(){t.promptBox.open(m.model.getPromptMsg())},t}o(t,e);var l=t.prototype;return l.onLoad=function(){var e=this;y.os==y.OS.WINDOWS?(this.touchLayer.on(b.EventType.MOUSE_DOWN,(function(t){e.currentMovePointTile=g.getRaycastObj(t.getLocation(),e.camera,O),t.getButton()==P.BUTTON_LEFT&&(e.mouseLeftDown=!0)}),this),this.touchLayer.on(b.EventType.MOUSE_UP,(function(t){t.getButton()==P.BUTTON_LEFT?(e.mouseLeftDown=!1,null!=e.currentMovePointTile&&(U.model.dig(e.currentMovePointTile.pos.x,e.currentMovePointTile.pos.y),1==U.model.isAllClear.val&&-1!=e.currentMovePointTile.tileData.monsterId.val&&A.Events.EVT_ENCOUNTER_MONSTER.emit(e.currentMovePointTile.tileData.index))):t.getButton()==P.BUTTON_RIGHT&&null!=e.currentMovePointTile&&0==e.currentMovePointTile.tileData.clear.val&&e.currentMovePointTile.tileData.flag.flip()}),this),this.touchLayer.on(b.EventType.MOUSE_MOVE,(function(t){e.currentMovePointTile=g.getRaycastObj(t.getLocation(),e.camera,O)}),this)):(this.touchLayer.on(b.EventType.TOUCH_START,(function(t){e.mouseLeftDown=!0,e.currentPointTile=g.getRaycastObj(t.getLocation(),e.camera,O),e.currentMovePointTile=e.currentPointTile,e.longPressDuration=0}),this),this.touchLayer.on(b.EventType.TOUCH_END,(function(t){e.mouseLeftDown=!1,null!=e.currentPointTile&&(U.model.dig(e.currentPointTile.pos.x,e.currentPointTile.pos.y),1==U.model.isAllClear.val&&-1!=e.currentPointTile.tileData.monsterId.val&&A.Events.EVT_ENCOUNTER_MONSTER.emit(e.currentMovePointTile.tileData.index)),e.currentPointTile=null}),this),this.touchLayer.on(b.EventType.TOUCH_MOVE,(function(t){e.currentMovePointTile=g.getRaycastObj(t.getLocation(),e.camera,O)}),this))},l.update=function(e){1==this.mouseLeftDown&&(null!=this.currentMovePointTile&&U.model.testTile(this.currentMovePointTile.pos.x,this.currentMovePointTile.pos.y),null!=this.currentPointTile&&0==this.currentPointTile.tileData.clear.val&&(this.longPressDuration+=e,this.longPressDuration>.5&&(this.longPressDuration=0,this.currentPointTile.tileData.flag.flip(),this.currentPointTile=null))),this.monInfo.close(),1==U.model.isAllClear.val&&null!=this.currentMovePointTile&&-1!=this.currentMovePointTile.tileData.monsterId.val&&(this.monInfo.open(this.currentMovePointTile.tileData.index),this.monInfo.setPos(this.currentMovePointTile.node.worldPosition)),null!=this.currentMovePointTile&&0==this.currentMovePointTile.tileData.clear.val&&this.currentMovePointTile.onTest()},l.start=function(){U.model.start()},l.startGame=function(){this.currentMovePointTile=null,this.currentPointTile=null,this.itemPool.releaseAll();for(var e=0,t=U.model.total;e<t;e++){var o=this.itemPool.get();o.node.setParent(this.nodeGrids),o.init(e),o.node.active=!0}},l.onPlayerFloorLevelUpdate=function(){this.labelFloorLevel.string="第 "+A.model.roleData.floorLevel.val+" 关"},l.onPlayerScoreUpdate=function(){this.labelScore.string="得分 "+A.model.roleData.score.val},l.onPlayerNameUpdate=function(){this.labelName.string=A.model.roleData.name.val},l.onPlayerLevelUpdate=function(){this.labelLevel.string="等级："+A.model.roleData.level.val},l.onPlayerExpUpdate=function(){this.labelExp.string="经验："+A.model.roleData.exp.val},l.onPlayerGoldUpdate=function(){this.labelGold.string="金币："+A.model.roleData.gold.val},l.onPlayerHpUpdate=function(){this.labelHp.string="血量："+A.model.roleData.hp.val},l.onPlayerAtkUpdate=function(){this.labelAtk.string="攻击力："+A.model.roleData.atk.val},l.onPlayerDefUpdate=function(){this.labelDef.string="防御力："+A.model.roleData.def.val},l.onPlayerSwordUpdate=function(){A.model.roleData.sword.val>0?this.labelSword.color=f.WHITE:this.labelSword.color=f.GRAY,this.labelSword.string="剑("+A.model.roleData.sword.val+")"},l.onPlayerShieldUpdate=function(){A.model.roleData.shield.val>0?this.labelShield.color=f.WHITE:this.labelShield.color=f.GRAY,this.labelShield.string="盾("+A.model.roleData.shield.val+")"},l.onPlayerArmorUpdate=function(){A.model.roleData.armor.val>0?this.labelArmor.color=f.WHITE:this.labelArmor.color=f.GRAY,this.labelArmor.string="铠甲("+A.model.roleData.armor.val+")"},l.onPromptMsg=function(){this.unschedule(this.prompt),this.scheduleOnce(this.prompt)},l.onBattle=function(e){this.battle.battle(e)},l.onAllClear=function(){this.btnNext.node.active=U.model.isAllClear.val,this.btnNext.getComponent(T).play()},l.onClickNextGame=function(){U.model.checkPass()?U.model.next():m.model.appendPromptMsg("前路未知，无法前往")},l.onClickReStart=function(){U.model.genGrid()},t}(d)).prototype,"rows",[ze],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),Pe=t(ye.prototype,"cols",[ze],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 15}}),fe=t(ye.prototype,"nodeGrids",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Te=t(ye.prototype,"prefabTile",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=t(ye.prototype,"touchLayer",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=t(ye.prototype,"camera",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=t(ye.prototype,"promptBox",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ee=t(ye.prototype,"labelFloorLevel",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(ye.prototype,"labelScore",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=t(ye.prototype,"labelName",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),De=t(ye.prototype,"labelLevel",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ae=t(ye.prototype,"labelExp",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ue=t(ye.prototype,"labelGold",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oe=t(ye.prototype,"labelHp",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=t(ye.prototype,"labelAtk",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=t(ye.prototype,"labelDef",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Le=t(ye.prototype,"labelSword",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Me=t(ye.prototype,"labelShield",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Re=t(ye.prototype,"labelArmor",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=t(ye.prototype,"battle",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=t(ye.prototype,"btnNext",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ge=t(ye.prototype,"monInfo",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(ye.prototype,"startGame",[q],Object.getOwnPropertyDescriptor(ye.prototype,"startGame"),ye.prototype),t(ye.prototype,"onPlayerFloorLevelUpdate",[K],Object.getOwnPropertyDescriptor(ye.prototype,"onPlayerFloorLevelUpdate"),ye.prototype),t(ye.prototype,"onPlayerScoreUpdate",[Q],Object.getOwnPropertyDescriptor(ye.prototype,"onPlayerScoreUpdate"),ye.prototype),t(ye.prototype,"onPlayerNameUpdate",[X],Object.getOwnPropertyDescriptor(ye.prototype,"onPlayerNameUpdate"),ye.prototype),t(ye.prototype,"onPlayerLevelUpdate",[$],Object.getOwnPropertyDescriptor(ye.prototype,"onPlayerLevelUpdate"),ye.prototype),t(ye.prototype,"onPlayerExpUpdate",[ee],Object.getOwnPropertyDescriptor(ye.prototype,"onPlayerExpUpdate"),ye.prototype),t(ye.prototype,"onPlayerGoldUpdate",[te],Object.getOwnPropertyDescriptor(ye.prototype,"onPlayerGoldUpdate"),ye.prototype),t(ye.prototype,"onPlayerHpUpdate",[oe],Object.getOwnPropertyDescriptor(ye.prototype,"onPlayerHpUpdate"),ye.prototype),t(ye.prototype,"onPlayerAtkUpdate",[ne],Object.getOwnPropertyDescriptor(ye.prototype,"onPlayerAtkUpdate"),ye.prototype),t(ye.prototype,"onPlayerDefUpdate",[re],Object.getOwnPropertyDescriptor(ye.prototype,"onPlayerDefUpdate"),ye.prototype),t(ye.prototype,"onPlayerSwordUpdate",[le],Object.getOwnPropertyDescriptor(ye.prototype,"onPlayerSwordUpdate"),ye.prototype),t(ye.prototype,"onPlayerShieldUpdate",[ie],Object.getOwnPropertyDescriptor(ye.prototype,"onPlayerShieldUpdate"),ye.prototype),t(ye.prototype,"onPlayerArmorUpdate",[ae],Object.getOwnPropertyDescriptor(ye.prototype,"onPlayerArmorUpdate"),ye.prototype),t(ye.prototype,"onPromptMsg",[pe],Object.getOwnPropertyDescriptor(ye.prototype,"onPromptMsg"),ye.prototype),t(ye.prototype,"onBattle",[ue],Object.getOwnPropertyDescriptor(ye.prototype,"onBattle"),ye.prototype),t(ye.prototype,"onAllClear",[ce],Object.getOwnPropertyDescriptor(ye.prototype,"onAllClear"),ye.prototype),se=ye))||se));l._RF.pop()}}}));

System.register("chunks:///_virtual/MineRes.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MineData.ts"],(function(e){var t,i,r,n,o,a,s,l,u,c,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,r=e.inheritsLoose,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Enum,l=e.SpriteFrame,u=e.Node,c=e.Component},function(e){p=e.MineData}],execute:function(){var f,m,y,b,h,M,g,R,d,T,v,z,w,D;o._RF.push({},"d746552h1RCMaeaNI/abtZJ","MineRes",void 0);var F=a.ccclass,I=a.property,_=(f=F("MineRes_Item"),m=I({type:s(p.ETileType)}),y=I(l),f((M=t((h=function(){i(this,"eType",M,this),i(this,"spriteFrame",g,this)}).prototype,"eType",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.ETileType.None}}),g=t(h.prototype,"spriteFrame",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=h))||b);e("MineRes",(R=F("MineRes"),d=I([_]),T=I([u]),R((w=t((z=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"resItem",w,n(t)),i(t,"mmonsters",D,n(t)),t}return r(t,e),t}(c)).prototype,"resItem",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=t(z.prototype,"mmonsters",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=z))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/MineTile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GEvent.ts","./MineData.ts","./MineRes.ts"],(function(t){var e,n,i,o,r,a,l,s,p,c,u,T,h,y,f,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createClass},function(t){a=t.cclegacy,l=t._decorator,s=t.Label,p=t.Sprite,c=t.Node,u=t.Animation,T=t.Color,h=t.Component},function(t){y=t.GEvent},function(t){f=t.MineData},function(t){g=t.MineRes}],execute:function(){var v,E,b,d,D,m,M,C,P,_,x,F,R,w,A,O,I,L,S,j,z;a._RF.push({},"55e29iy2oxHZaVRKLj3FFPZ","MineTile",void 0);var V=l.ccclass,k=l.property;t("MineTile",(v=V("MineTile"),E=k(s),b=k(p),d=k(p),D=k(c),m=k(u),M=k(g),C=y.onEvent((function(){return f.Events.EVT_TILE_ATTR_UPDATE[this.index].type})),P=y.onEvent((function(){return f.Events.EVT_TILE_ATTR_UPDATE[this.index].clear})),_=y.onEvent((function(){return f.Events.EVT_TILE_ATTR_UPDATE[this.index].flag})),x=y.onEvent((function(){return f.Events.EVT_TILE_ATTR_UPDATE[this.index].flagState})),F=y.onEvent((function(){return f.Events.EVT_TILE_ATTR_UPDATE[this.index].monsterClear})),R=y.onEvent((function(){return f.Events.EVT_TILE_TEST[this.index]})),v((O=e((A=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"labelPromptCount",O,o(e)),i(e,"iconMine",I,o(e)),i(e,"iconMask",L,o(e)),i(e,"nodeFlag",S,o(e)),i(e,"aniTest",j,o(e)),i(e,"mineRes",z,o(e)),e.index=-1,e.isTesting=!1,e}n(e,t);var a=e.prototype;return a.init=function(t){this.index=t,this.iconMine.node.active=this.tileData.type.val!=f.ETileType.None,this.labelPromptCount.string=this.tileData.promtCount.val.toString(),this.labelPromptCount.node.active=-1==this.tileData.monsterId.val&&this.tileData.promtCount.val>0,this.onType(),this.onClear(),this.onFlag(),this.onMonClear(),this.onFlagState()},a.onType=function(){var t=this;if(this.iconMine.node.active=this.tileData.type.val!=f.ETileType.None,this.tileData.type.val!=f.ETileType.None){var e,n=null==(e=this.mineRes.resItem.find((function(e){return e.eType==t.tileData.type.val})))?void 0:e.spriteFrame;null!=n&&(this.iconMine.spriteFrame=n)}},a.onClear=function(){this.iconMask.node.active=!this.tileData.clear.val},a.onFlag=function(){this.nodeFlag.active=this.tileData.flag.val},a.onFlagState=function(){1==this.tileData.flagState.val?this.labelPromptCount.color=T.WHITE:this.labelPromptCount.color=T.RED},a.onMonClear=function(){0==this.tileData.monsterClear.val?this.iconMine.color=T.WHITE:this.iconMine.color=T.GRAY},a.onTest=function(){this.unschedule(this.exitTest),this.scheduleOnce(this.exitTest,.1),this.isTesting||(this.isTesting=!0,this.aniTest.play("enterTest"))},a.exitTest=function(){this.unschedule(this.exitTest),this.isTesting=!1,this.aniTest.play("exitTest")},r(e,[{key:"pos",get:function(){return f.model.indexToPos(this.index)}},{key:"tileData",get:function(){return f.model.getTile(this.pos.x,this.pos.y)}}]),e}(h)).prototype,"labelPromptCount",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(A.prototype,"iconMine",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(A.prototype,"iconMask",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(A.prototype,"nodeFlag",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(A.prototype,"aniTest",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(A.prototype,"mineRes",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(A.prototype,"onType",[C],Object.getOwnPropertyDescriptor(A.prototype,"onType"),A.prototype),e(A.prototype,"onClear",[P],Object.getOwnPropertyDescriptor(A.prototype,"onClear"),A.prototype),e(A.prototype,"onFlag",[_],Object.getOwnPropertyDescriptor(A.prototype,"onFlag"),A.prototype),e(A.prototype,"onFlagState",[x],Object.getOwnPropertyDescriptor(A.prototype,"onFlagState"),A.prototype),e(A.prototype,"onMonClear",[F],Object.getOwnPropertyDescriptor(A.prototype,"onMonClear"),A.prototype),e(A.prototype,"onTest",[R],Object.getOwnPropertyDescriptor(A.prototype,"onTest"),A.prototype),w=A))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BattleData.ts","./MineData.ts"],(function(t){var e,n,i,o,l,a,r,s,u,c,b,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,l=t.createClass},function(t){a=t.cclegacy,r=t._decorator,s=t.Label,u=t.Node,c=t.Component},function(t){b=t.BattleData},function(t){f=t.MineData}],execute:function(){var h,p,d,m,g,D,y,v,w,M,x,z,B,I,P,L,N,k,R,A,H;a._RF.push({},"49939cXmFNNwre1hKNfuW/B","MonsterInfo",void 0);var S=r.ccclass,_=r.property;t("MonsterInfo",(h=S("MonsterInfo"),p=_(s),d=_(s),m=_(s),g=_(s),D=_(s),y=_(s),v=_(s),w=_(u),M=_(u),h((B=e((z=function(t){function e(){for(var e,n=arguments.length,l=new Array(n),a=0;a<n;a++)l[a]=arguments[a];return e=t.call.apply(t,[this].concat(l))||this,i(e,"labelMonName",B,o(e)),i(e,"labelHp",I,o(e)),i(e,"labelAtk",P,o(e)),i(e,"labelDef",L,o(e)),i(e,"labelExp",N,o(e)),i(e,"labelGold",k,o(e)),i(e,"labelScore",R,o(e)),i(e,"nodeLeftBot",A,o(e)),i(e,"nodeRightBot",H,o(e)),e.tileIndex=void 0,e.monData=null,e}n(e,t);var a=e.prototype;return a.open=function(t){this.tileIndex=t,-1!=this.tileData.monsterId.val&&1!=this.tileData.monsterClear.val?(this.node.active=!0,this.monData=b.config.getMonsterData(this.tileData.monsterId.val,b.model.roleData.floorLevel.val),this.labelMonName.string=b.config.MonsterName[this.tileData.monsterId.val],b.model.formMonData(this.monData),this.labelHp.string="血量："+this.monData.hp,this.labelAtk.string="攻击力："+this.monData.atk,this.labelDef.string="防御力："+this.monData.def,this.labelExp.string="经验值："+this.monData.exp,this.labelGold.string="金币："+this.monData.gold,this.labelScore.string="积分："+this.monData.score):this.node.active=!1},a.close=function(){this.node.active=!1},a.setPos=function(t){this.node.worldPosition=t;var e=this.node.worldPosition.clone(),n=this.nodeLeftBot.worldPosition.x,i=this.nodeRightBot.worldPosition.x,o=this.nodeLeftBot.worldPosition.y;n<0&&(e.x+=Math.abs(n)),i>1080&&(e.x-=i-1080),o<0&&(e.y+=Math.abs(o)),this.node.worldPosition=e},l(e,[{key:"tileData",get:function(){return f.model.grids[this.tileIndex]}}]),e}(c)).prototype,"labelMonName",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(z.prototype,"labelHp",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(z.prototype,"labelAtk",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(z.prototype,"labelDef",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(z.prototype,"labelExp",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(z.prototype,"labelGold",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(z.prototype,"labelScore",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(z.prototype,"nodeLeftBot",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(z.prototype,"nodeRightBot",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=z))||x));a._RF.pop()}}}));

System.register("chunks:///_virtual/ObjPool.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"5a9d0rmpYpN/Lvmfu+N0alS","ObjPool",void 0);t("ObjPool",function(){function t(t,e){this.set=new Set,this.all=new Set,this.fact=t,this.onRelease=e}var e=t.prototype;return e.get=function(){var t;return this.set.size>0?(t=this.set.values().next().value,this.set.delete(t)):(t=this.fact(),this.all.add(t)),t},e.release=function(t){var e;null==(e=this.onRelease)||e.call(this,t),this.set.add(t)},e.releaseAll=function(){var t=this;this.all.forEach((function(e){0==t.set.has(e)&&t.release(e)}))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ObjProxy.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"d4fb6S4EuFI45MK7Hhv/2P1","ObjProxy",void 0);t("ObjProxy",(function(t){var n=this;this.obj={},this.proxy=new Proxy(this.obj,{get:function(t,r){var o=t[r];return null!=o&&null!=o||(o=n.fact(r),t[r]=o),o}}),this.fact=t})),t("ObjProxyEventMap",(function(t){var n=this;this.obj={},this.proxy=new Proxy(this.obj,{get:function(t,r){var o=t[r];return null!=o&&null!=o||(o=n.fact(r),t[r]=o),o}}),this.fact=t}));n._RF.pop()}}}));

System.register("chunks:///_virtual/PromptBox.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,o,i,c,s,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,c=e._decorator,s=e.Label,l=e.Component}],execute:function(){var a,u,p,h,f;i._RF.push({},"8e351C65bFLEZ2BE3NELxS+","PromptBox",void 0);var d=c.ccclass,v=c.property;e("PromptBox",(a=d("PromptBox"),u=v(s),a((f=t((h=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return t=e.call.apply(e,[this].concat(i))||this,n(t,"labelDes",f,o(t)),t}r(t,e);var i=t.prototype;return i.open=function(e){this.node.active=!0,this.labelDes.string=e,this.scheduleOnce(this.close,1)},i.close=function(){var e=this;this.unschedule(this.close),this.scheduleOnce((function(){return e.node.active=!1}))},t}(l)).prototype,"labelDes",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=h))||p));i._RF.pop()}}}));

System.register("chunks:///_virtual/RebirthComfirm.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BattleData.ts"],(function(t){var e,n,i,r,o,l,a,c,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,l=t._decorator,a=t.Label,c=t.Component},function(t){s=t.BattleData}],execute:function(){var u,h,p,f,v;o._RF.push({},"c1c73B0K5ZLXq4u3LlCha6I","RebirthComfirm",void 0);var b=l.ccclass,m=l.property;t("RebirthComfirm",(u=b("RebirthComfirm"),h=m(a),u((v=e((f=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,i(e,"labelTips",v,r(e)),e.onDone=function(t){return null},e}n(e,t);var o=e.prototype;return o.open=function(){var t=this;return this.node.active=!0,this.labelTips.string="是否使用复活币("+s.model.roleData.rebirth.val+")？",new Promise((function(e,n){t.onDone=e}))},o.onClickOk=function(){var t;this.node.active=!1,null==(t=this.onDone)||t.call(this,!0)},o.onClickNo=function(){var t;this.node.active=!1,null==(t=this.onDone)||t.call(this,!1)},e}(c)).prototype,"labelTips",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/Resequence.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,s,o,c,r,i;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){s=e.cclegacy,o=e._decorator,c=e.Node,r=e.director,i=e.Component}],execute:function(){var u,a;s._RF.push({},"b591cJcXm9KUJqscBM4t/s7","Resequence",void 0);var l=o.ccclass;o.property,e("Resequence",l("Resequence")(((a=function(e){function s(){for(var t,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))||this).list=[],t.listLate=[],t}t(s,e),s.addOnUpdate=function(e){s.Ins.list.push(e)},s.addOnLateUpdate=function(e){s.Ins.listLate.push(e)};var o=s.prototype;return o.lateUpdate=function(e){for(;this.listLate.length>0;)this.listLate.pop()()},o.update=function(e){for(;this.list.length>0;)this.list.pop()()},n(s,null,[{key:"Ins",get:function(){if(null==s._Ins){var e=new c("Resequence");s._Ins=e.addComponent(s),r.addPersistRootNode(e)}return s._Ins}}]),s}(i))._Ins=null,u=a))||u);s._RF.pop()}}}));

System.register("chunks:///_virtual/SetFrameRate.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,a,n,i,o,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,c=e.game,u=e.Component}],execute:function(){var l,s,p;i._RF.push({},"e59fbJKwulEHbTCOjGZZ76U","SetFrameRate",void 0);var f=o.ccclass,m=o.property;e("SetFrameRate",f("SetFrameRate")((p=t((s=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,a(t,"frameRate",p,n(t)),t}return r(t,e),t.prototype.onLoad=function(){c.frameRate=this.frameRate},t}(u)).prototype,"frameRate",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 999}}),l=s))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/StorableValue.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var l,e,a,c;return{setters:[function(t){l=t.inheritsLoose,e=t.createClass},function(t){a=t.cclegacy,c=t.sys}],execute:function(){a._RF.push({},"a24c3UDcyxPQLU07JqRLH2R","StorableValue",void 0);var n=t("StorableValue",(function(t,l,e){void 0===e&&(e=null),this.getKey=t,this.defaultVal=l,this.callOnSet=e}));t("StorableEnum",function(t){function a(){for(var l,e=arguments.length,a=new Array(e),c=0;c<e;c++)a[c]=arguments[c];return(l=t.call.apply(t,[this].concat(a))||this).cache=null,l}return l(a,t),e(a,[{key:"val",get:function(){if(null==this.cache){var t=c.localStorage.getItem(this.getKey.call(this));this.cache=null!=t?parseFloat(t):this.defaultVal}return this.cache},set:function(t){var l;this.cache=t,null==t?c.localStorage.removeItem(this.getKey.call(this)):c.localStorage.setItem(this.getKey.call(this),t.toString()),null==(l=this.callOnSet)||l.call(this,t)}}]),a}(n)),t("StorableNumber",function(t){function a(){for(var l,e=arguments.length,a=new Array(e),c=0;c<e;c++)a[c]=arguments[c];return(l=t.call.apply(t,[this].concat(a))||this).cache=null,l}return l(a,t),e(a,[{key:"val",get:function(){if(null==this.cache){var t=c.localStorage.getItem(this.getKey.call(this));this.cache=null!=t?parseFloat(t):this.defaultVal}return this.cache},set:function(t){var l;this.cache=t,null==t?c.localStorage.removeItem(this.getKey.call(this)):c.localStorage.setItem(this.getKey.call(this),t.toString()),null==(l=this.callOnSet)||l.call(this,t)}}]),a}(n)),t("StorableString",function(t){function a(){for(var l,e=arguments.length,a=new Array(e),c=0;c<e;c++)a[c]=arguments[c];return(l=t.call.apply(t,[this].concat(a))||this).cache=null,l}return l(a,t),e(a,[{key:"val",get:function(){if(null==this.cache){var t=c.localStorage.getItem(this.getKey.call(this));this.cache=null!=t?t:this.defaultVal}return this.cache},set:function(t){var l;this.cache=t,null==t?c.localStorage.removeItem(this.getKey.call(this)):c.localStorage.setItem(this.getKey.call(this),t),null==(l=this.callOnSet)||l.call(this,t)}}]),a}(n)),t("StorableBoolean",function(t){function a(){for(var l,e=arguments.length,a=new Array(e),c=0;c<e;c++)a[c]=arguments[c];return(l=t.call.apply(t,[this].concat(a))||this).cache=null,l.flip=function(){return l.val=!l.val},l}return l(a,t),e(a,[{key:"val",get:function(){if(null==this.cache){var t=c.localStorage.getItem(this.getKey.call(this));this.cache=null!=t?"1"==t:this.defaultVal}return this.cache},set:function(t){var l;this.cache=t,null==t?c.localStorage.removeItem(this.getKey.call(this)):c.localStorage.setItem(this.getKey.call(this),t?"1":"0"),null==(l=this.callOnSet)||l.call(this,t)}}]),a}(n));a._RF.pop()}}}));

System.register("chunks:///_virtual/UtilsTool.ts",["cc"],(function(n){var t,e,o;return{setters:[function(n){t=n.cclegacy,e=n.geometry,o=n.PhysicsSystem}],execute:function(){t._RF.push({},"576b7N7rCxIz7aP2DnIhVap","UtilsTool",void 0);n("UtilsTool",new(function(){function n(){}var t=n.prototype;return t.delay=function(n,t){return new Promise((function(e,o){t.scheduleOnce((function(){e()}),n)}))},t.randomInt=function(n,t){return n=Math.ceil(n),t=Math.floor(t),Math.floor(Math.random()*(t-n))+n},t.getRaycastObj=function(n,t,r){var c=new e.Ray;if(t.screenPointToRay(n.x,n.y,c),o.instance.raycast(c))for(var a=o.instance.raycastResults,i=0;i<a.length;i++){var u=a[i].collider.node.getComponent(r);if(null!=u)return u}return null},n}()));t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});